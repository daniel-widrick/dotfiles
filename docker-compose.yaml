services:
  apt-cache:
    image: sameersbn/apt-cacher-ng:latest
    container_name: apt-cacher-ng
    restart: always
    ports:
      - "3142:3142"
    volumes:
      - apt_cache:/var/cache/apt-cacher-ng
      - ./etc/acng.conf:/etc/apt-cacher-ng/acng.conf:rw
  linux-dev-desktop:
    network_mode: host
    volumes:
      - linuxdevDataGitRepos:/home/${MYUSERNAME}/git-repos
      - linuxdevDataMozilla:/home/${MYUSERNAME}/.mozilla
      - linuxdevDataetc_ssh:/etc/ssh
      - ./etc/sshd_config:/etc/ssh/sshd_config
    container_name: linux-dev-desktop
    build:
      context: .
      args:
        USERNAME: ${MYUSERNAME}
        PASSWORD: ${PASSWORD}
        CACHE_URL: ${CACHE_URL}
    restart: always
    depends_on:
      - apt-cache
    environment:
      - USERNAME=${MYUSERNAME}
      - MYUSERNAME=${MYUSERNAME}
      - PASSWORD=${PASSWORD}
volumes:
  linuxdevDataGitRepos:
  linuxdevDataMozilla:
  linuxdevDataetc_ssh:
  apt_cache:
